<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Futbol Menajerlik</title>
    
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.157.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.157.0/examples/jsm/"
            }
        }
    </script>

    <style>
        :root {
            --bg-gradient: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            --primary-color: #1a73e8;
            --accent-color: #00e676;
            --text-color: #ffffff;
            --card-bg: rgba(255, 255, 255, 0.05);
            --border-color: rgba(255, 255, 255, 0.2);
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background: var(--bg-gradient);
            color: var(--text-color);
            margin: 0;
            overflow: hidden; /* 3D sahne i√ßin kaydƒ±rmayƒ± engelle */
        }

        .game-view {
            display: none; /* Ba≈ülangƒ±√ßta t√ºm g√∂r√ºn√ºmler gizli */
            width: 100vw;
            height: 100vh;
            padding: 20px;
            box-sizing: border-box;
            animation: fadeIn 0.5s ease;
        }

        .game-view.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.98); }
            to { opacity: 1; transform: scale(1); }
        }

        /* --- MEN√ú EKRANI --- */
        #menu-view {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .main-title {
            font-size: 4em;
            font-weight: bold;
            text-shadow: 0 0 20px var(--accent-color);
            margin-bottom: 20px;
        }

        .menu-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            width: 100%;
            max-width: 600px;
        }

        .menu-btn {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            color: var(--text-color);
            padding: 25px;
            font-size: 1.5em;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .menu-btn:hover {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        
        .currency-display {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--card-bg);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 1.2em;
            border: 1px solid var(--border-color);
        }
        
        .back-to-menu {
            position: absolute;
            top: 20px;
            left: 20px;
            background: var(--card-bg);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 1.2em;
            border: 1px solid var(--border-color);
            cursor: pointer;
        }

        /* --- PAKET EKRANI --- */
        #packs-view { text-align: center; }
        
        #open-pack-btn {
            padding: 20px 40px;
            font-size: 1.5em;
            cursor: pointer;
            background-color: var(--accent-color);
            color: #0f2027;
            border: none;
            border-radius: 10px;
            box-shadow: 0 0 20px var(--accent-color);
            transition: all 0.3s ease;
        }
        
        #open-pack-btn:hover { transform: scale(1.05); }

        #pack-results {
            margin-top: 30px;
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .player-card {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 20px;
            width: 150px;
            text-align: center;
            animation: reveal 0.5s ease backwards;
        }
        
        .player-card .ovr { font-size: 2.5em; font-weight: bold; }
        .player-card .name { font-size: 1.1em; }
        .player-card .pos { color: #ccc; }

        @keyframes reveal {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- 3D MA√á EKRANI --- */
        #match-view-3d { padding: 0; }
        #threejs-canvas { width: 100%; height: 100%; display: block; }

    </style>
</head>
<body>

    <div id="currency-display" class="currency-display" style="display: none;">
        üí∞ Coins: <span id="coin-balance">1000</span>
    </div>
    <div id="back-to-menu" class="back-to-menu" style="display: none;">
        &lt; Men√ºye D√∂n
    </div>

    <div id="menu-view" class="game-view active">
        <h1 class="main-title">FUTBOL KRALLIƒûI</h1>
        <div class="menu-buttons">
            <button class="menu-btn" data-view="packs-view">Paketler</button>
            <button class="menu-btn" data-view="squad-view">Kadro</button>
            <button class="menu-btn" data-view="match-view-3d">3D Ma√ß (Beta)</button>
            <button class="menu-btn" data-view="dev-view">Geli≈ütir</button>
        </div>
    </div>
    
    <div id="packs-view" class="game-view">
        <h2>Paket D√ºkkanƒ±</h2>
        <p>Yeni oyuncular ke≈üfetmek i√ßin paket a√ß!</p>
        <button id="open-pack-btn">Standart Paket A√ß (150 Coin)</button>
        <div id="pack-results"></div>
    </div>
    
    <div id="squad-view" class="game-view">
        <h2>Kadro Y√∂netimi</h2>
        <p>Bu alan yakƒ±nda kadro d√ºzenleme √∂zellikleriyle dolacak!</p>
    </div>
    
    <div id="dev-view" class="game-view">
        <h2>Geli≈ütirme Merkezi</h2>
        <p>Bu alanda oyuncularƒ±nƒ± geli≈ütirebileceksin.</p>
    </div>
    
    <div id="match-view-3d" class="game-view">
        <canvas id="threejs-canvas"></canvas>
    </div>
    

    <script type="module">
        // Three.js k√ºt√ºphanesini ve eklentilerini import et
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

        // --- OYUN DEƒûƒ∞≈ûKENLERƒ∞ ---
        const POSITIONS = ['GK', 'DEF', 'MID', 'FWD'];
        const FIRST_NAMES = ['Arda', 'Kerem', 'Ferdi', 'Uƒüurcan', 'Hakan', 'Barƒ±≈ü', 'Kenan', 'Orkun', 'Merih', 'Salih'];
        const LAST_NAMES = ['G√ºler', 'Akt√ºrkoƒülu', 'Kadƒ±oƒülu', '√áakƒ±r', '√áalhanoƒülu', 'Yƒ±lmaz', 'Yƒ±ldƒ±z', 'K√∂k√ß√º', 'Demiral', '√ñzcan'];
        let nextPlayerId = 1;
        
        let gameState = {
            coins: 1000,
            roster: [], // Ba≈ülangƒ±√ßta bo≈ü
        };
        
        // --- ELEMENT REFERANSLARI ---
        const coinBalanceEl = document.getElementById('coin-balance');
        const menuButtons = document.querySelectorAll('.menu-btn');
        const gameViews = document.querySelectorAll('.game-view');
        const currencyDisplay = document.getElementById('currency-display');
        const backToMenuBtn = document.getElementById('back-to-menu');
        
        const openPackBtn = document.getElementById('open-pack-btn');
        const packResultsEl = document.getElementById('pack-results');


        // --- GENEL FONKSƒ∞YONLAR ---
        
        function updateCoinDisplay() {
            coinBalanceEl.textContent = gameState.coins;
        }

        // Farklƒ± oyun ekranlarƒ± arasƒ±nda ge√ßi≈ü yapar
        function switchView(viewId) {
            gameViews.forEach(view => view.classList.remove('active'));
            document.getElementById(viewId).classList.add('active');
            
            if (viewId === 'menu-view') {
                currencyDisplay.style.display = 'none';
                backToMenuBtn.style.display = 'none';
            } else {
                currencyDisplay.style.display = 'block';
                backToMenuBtn.style.display = 'block';
            }
            
            // Eƒüer 3D ma√ß ekranƒ±na ge√ßiyorsak, sahneyi ba≈ülat
            if(viewId === 'match-view-3d') {
                initThreeJS();
            }
        }
        
        // --- OYUNCU OLU≈ûTURMA VE PAKET MEKANƒ∞ƒûƒ∞ ---
        function createRandomPlayer() {
            const firstName = FIRST_NAMES[Math.floor(Math.random() * FIRST_NAMES.length)];
            const lastName = LAST_NAMES[Math.floor(Math.random() * LAST_NAMES.length)];
            const player = {
                id: nextPlayerId++,
                name: `${firstName} ${lastName}`,
                pos: POSITIONS[Math.floor(Math.random() * POSITIONS.length)],
                ovr: Math.floor(Math.random() * 40) + 55 // 55-94 arasƒ± g√º√ß
            };
            return player;
        }
        
        function openPack() {
            const packCost = 150;
            if (gameState.coins < packCost) {
                alert('Yeterli coinin yok!');
                return;
            }
            
            gameState.coins -= packCost;
            updateCoinDisplay();
            
            packResultsEl.innerHTML = ''; // √ñnceki sonu√ßlarƒ± temizle
            const newPlayers = [];
            for (let i = 0; i < 5; i++) {
                const newPlayer = createRandomPlayer();
                newPlayers.push(newPlayer);
                gameState.roster.push(newPlayer);
            }
            
            // Oyuncularƒ± kart olarak ekranda g√∂ster
            newPlayers.forEach((player, index) => {
                const card = document.createElement('div');
                card.className = 'player-card';
                card.style.animationDelay = `${index * 100}ms`;
                card.innerHTML = `
                    <div class="ovr">${player.ovr}</div>
                    <div class="name">${player.name}</div>
                    <div class="pos">${player.pos}</div>
                `;
                packResultsEl.appendChild(card);
            });

            console.log("G√ºncel Kadro:", gameState.roster);
        }
        
        // --- THREE.JS 3D SAHNE FONKSƒ∞YONLARI ---
        let scene, camera, renderer, controls;
        
        function initThreeJS() {
            const canvas = document.getElementById('threejs-canvas');
            
            // 1. Sahne (Scene)
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x87ceeb); // G√∂ky√ºz√º rengi

            // 2. Kamera (Camera)
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 15, 30); // Kameranƒ±n pozisyonu

            // 3. I≈üƒ±k (Light)
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(10, 20, 5);
            scene.add(directionalLight);

            // 4. Nesneler (Objects)
            // Saha (Plane)
            const pitchGeometry = new THREE.PlaneGeometry(100, 60);
            const pitchMaterial = new THREE.MeshStandardMaterial({ color: 0x008000 }); // Ye≈üil
            const pitch = new THREE.Mesh(pitchGeometry, pitchMaterial);
            pitch.rotation.x = -Math.PI / 2; // Yere yatƒ±r
            scene.add(pitch);

            // Top (Sphere)
            const ballGeometry = new THREE.SphereGeometry(0.5, 32, 32);
            const ballMaterial = new THREE.MeshStandardMaterial({ color: 0xffffff }); // Beyaz
            const ball = new THREE.Mesh(ballGeometry, ballMaterial);
            ball.position.set(0, 0.5, 0); // Sahanƒ±n ortasƒ±na ve biraz yukarƒ±sƒ±na koy
            scene.add(ball);

            // 5. ƒ∞≈üleyici (Renderer)
            renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);

            // 6. Kontroller (OrbitControls)
            controls = new OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;

            // Animasyon D√∂ng√ºs√º
            animate();
        }

        function animate() {
            requestAnimationFrame(animate);
            controls.update(); // Kamera kontrollerini g√ºncelle
            renderer.render(scene, camera);
        }

        // Pencere yeniden boyutlandƒ±rƒ±ldƒ±ƒüƒ±nda
        window.addEventListener('resize', () => {
            if (renderer) {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }
        });


        // --- OLAY Dƒ∞NLEYƒ∞Cƒ∞LERƒ∞ ---
        
        // Men√º butonlarƒ±
        menuButtons.forEach(button => {
            button.addEventListener('click', () => {
                const viewId = button.getAttribute('data-view');
                switchView(viewId);
            });
        });
        
        // Men√ºye D√∂n butonu
        backToMenuBtn.addEventListener('click', () => switchView('menu-view'));
        
        // Paket a√ßma butonu
        openPackBtn.addEventListener('click', openPack);
        
        // --- OYUNU BA≈ûLAT ---
        updateCoinDisplay(); // Ba≈ülangƒ±√ß coin'ini g√∂ster
        
    </script>
</body>
</html>
